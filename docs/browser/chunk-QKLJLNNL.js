import{a as P}from"./chunk-BS6BRVDQ.js";import{l as R}from"./chunk-VUNKZBAI.js";import{a as O}from"./chunk-O4C5BUMC.js";import{a as V}from"./chunk-THTALMT4.js";import{g as A}from"./chunk-LHRA3WSF.js";import{$a as f,Ab as _,Hb as E,Ib as D,Ja as W,Nb as S,Oa as s,Pa as m,Pb as b,Ta as T,_ as w,bb as x,fb as C,gb as y,hb as I,ia as p,ib as F,ja as u,jb as r,kb as o,lb as g,ob as h,qb as v,qc as L,rb as c,yb as k,zb as d}from"./chunk-SVRTX5CE.js";var B=n=>["/productDetails",n];function $(n,e){if(n&1){let t=h();r(0,"i",17),v("click",function(){p(t);let a=c().$implicit,l=c(2);return u(l.addFav(a._id))}),o()}}function M(n,e){if(n&1){let t=h();r(0,"i",18),v("click",function(){p(t);let a=c().$implicit,l=c(2);return u(l.removeFav(a._id))}),o()}}function Y(n,e){if(n&1){let t=h();r(0,"div",4)(1,"div",5)(2,"header",6),g(3,"img",7),r(4,"h3",8),d(5),o(),r(6,"h4",9),d(7),S(8,"cuttext"),o(),r(9,"div",10)(10,"span"),d(11),S(12,"currency"),o(),r(13,"span"),g(14,"i",11),r(15,"span",12),d(16),o()()()(),r(17,"footer",13)(18,"button",14,0),v("click",function(){let a=p(t).$implicit,l=k(19),N=c(2);return u(N.addProduct(a._id,l))}),d(20," + Add To Cart "),o(),f(21,$,1,0,"i",15)(22,M,1,0,"i",16),o()()()}if(n&2){let t=e.$implicit,i=c(2);s(2),x("routerLink",D(15,B,t._id)),s(),x("src",t.imageCover,W)("alt",t.title)("title",t.title),s(2),_(t.category.name),s(2),_(b(8,9,t.title,2)),s(4),_(b(12,12,t.price,"EGY")),s(5),_(t.ratingsAverage),s(5),C(i.wishListData.includes(t._id)?22:21)}}function z(n,e){if(n&1&&(r(0,"section",1)(1,"div",3),I(2,Y,23,17,"div",4,y),o()()),n&2){let t=c();s(2),F(t.products)}}function G(n,e){n&1&&(r(0,"h2",2),d(1,` Your Wish List Is Empty
`),o())}var j=class n{constructor(e,t,i,a){this._WishlistService=e;this._ToastrService=t;this._CartService=i;this._Renderer2=a}products=[];wishListData=[];ngOnInit(){this._WishlistService.getWishlist().subscribe({next:e=>{this.products=e.data;let t=e.data.map(i=>i._id);this.wishListData=t},error:e=>{console.log(e)}})}addFav(e){this._WishlistService.addToWish(e).subscribe({next:t=>{this._ToastrService.success(t.message);let i=t.data.length;this._WishlistService.countOfWish.next(i)},error:t=>{console.log(t)}})}removeFav(e){this._WishlistService.removeFromWish(e).subscribe({next:t=>{this._ToastrService.success(t.message),this.wishListData=t.data;let i=this.products.filter(l=>this.wishListData.includes(l._id));this.products=i;let a=t.data.length;this._WishlistService.countOfWish.next(a)},error:t=>{console.log(t)}})}addProduct(e,t){this._Renderer2.setAttribute(t,"disabled","true"),this._CartService.addToCart(e).subscribe({next:i=>{this._ToastrService.success(i.message),this._Renderer2.removeAttribute(t,"disabled"),this._CartService.cartNumber.next(i.numOfCartItems)},error:i=>{console.log(i),this._Renderer2.removeAttribute(t,"disabled")}})}static \u0275fac=function(t){return new(t||n)(m(O),m(R),m(V),m(T))};static \u0275cmp=w({type:n,selectors:[["app-wishlist"]],standalone:!0,features:[E],decls:2,vars:1,consts:[["btnAdd",""],[1,"py-4"],[1,"mb-0","alert","alert-danger","w-50","text-center","mx-auto"],[1,"row","g-4"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"product","h-100"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"h6","text-main"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"main-btn","w-100",3,"click"],[1,"fa-regular","fa-heart","ms-3","heart"],[1,"fa-solid","fa-heart","ms-3","heart","text-danger"],[1,"fa-regular","fa-heart","ms-3","heart",3,"click"],[1,"fa-solid","fa-heart","ms-3","heart","text-danger",3,"click"]],template:function(t,i){t&1&&f(0,z,4,0,"section",1)(1,G,2,0,"h2",2),t&2&&C(i.products.length>0?0:1)},dependencies:[A,P,L]})};export{j as WishlistComponent};
