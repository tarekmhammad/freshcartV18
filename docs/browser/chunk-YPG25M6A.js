import{a as M}from"./chunk-THTALMT4.js";import{g as P}from"./chunk-LHRA3WSF.js";import{$a as k,Ab as g,Bb as S,Hb as F,Ib as N,Ja as y,Nb as E,Oa as s,Pa as x,Pb as I,Rb as B,Ta as R,_ as w,bb as v,fb as D,gb as T,hb as A,ia as p,ib as V,ja as _,jb as r,kb as o,lb as f,ob as h,qb as C,qc as L,rb as m,yb as d,zb as c}from"./chunk-SVRTX5CE.js";var O=i=>["/payment",i];function $(i,t){if(i&1){let e=h();r(0,"div",10)(1,"div",12),f(2,"img",13),o(),r(3,"div",14)(4,"div")(5,"h3",15),c(6),o(),r(7,"p",16),c(8),E(9,"currency"),o(),r(10,"button",17,1),C("click",function(){let a=p(e).$implicit,l=d(11),u=m(2);return _(u.removeItem(a.product._id,l))}),f(12,"i",18),c(13," Remove "),o()(),r(14,"div")(15,"button",19,2),C("click",function(){let a=p(e).$implicit,l=d(16),u=d(21),b=m(2);return _(b.changeCount(a.count-1,a.product._id,l,u))}),c(17," - "),o(),r(18,"span",20),c(19),o(),r(20,"button",19,3),C("click",function(){let a=p(e).$implicit,l=d(16),u=d(21),b=m(2);return _(b.changeCount(a.count+1,a.product._id,l,u))}),c(22," + "),o()()()()}if(i&2){let e=t.$implicit;s(2),v("src",e.product.imageCover,y)("alt",e.product.title),s(4),g(e.product.title),s(2),S(" Price: ",I(9,5,e.price,"E\xA3 ")," "),s(11),g(e.count)}}function H(i,t){if(i&1){let e=h();r(0,"section",4)(1,"div",6)(2,"h1",7),c(3,"Shop Cart"),o(),r(4,"button",8),C("click",function(){p(e);let a=m();return _(a.clear())}),c(5," Clear Cart "),o()(),r(6,"p",9),c(7),E(8,"currency"),o(),A(9,$,23,8,"div",10,T),r(11,"button",11),c(12," Payment Now "),o()()}if(i&2){let e=m();s(7),S(" Total Price: ",I(8,2,e.cartDetails.totalCartPrice,"E\xA3 ")," "),s(2),V(e.cartDetails.products),s(2),v("routerLink",N(5,O,e.cartDetails._id))}}function U(i,t){i&1&&(r(0,"h2",5),c(1,` Your Cart Is Empty....
`),o())}function Y(i,t){i&1&&(r(0,"h2",5),c(1," Your Cart Is Empty.... "),o())}var j=class i{constructor(t,e){this._CartService=t;this._Renderer2=e}cartDetails=null;ngOnInit(){this._CartService.getCartUser().subscribe({next:t=>{this.cartDetails=t.data},error:t=>{console.log(t)}})}removeItem(t,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.removeCartItem(t).subscribe({next:n=>{this._Renderer2.removeAttribute(e,"disabled"),this.cartDetails=n.data,this._CartService.cartNumber.next(n.numOfCartItems)},error:n=>{console.log(n),this._Renderer2.removeAttribute(e,"disabled")}})}changeCount(t,e,n,a){t>=1&&(this._Renderer2.setAttribute(n,"disabled","true"),this._Renderer2.setAttribute(a,"disabled","true"),this._CartService.updateCartCount(e,t).subscribe({next:l=>{this.cartDetails=l.data,this._Renderer2.removeAttribute(n,"disabled"),this._Renderer2.removeAttribute(a,"disabled")},error:l=>{this._Renderer2.removeAttribute(n,"disabled"),this._Renderer2.removeAttribute(a,"disabled"),console.log(l)}}))}clear(){this._CartService.clearCart().subscribe({next:t=>{console.log(t),t.message==="success"&&(this.cartDetails=null,this._CartService.cartNumber.next(0))},error:t=>{console.log(t)}})}static \u0275fac=function(e){return new(e||i)(x(M),x(R))};static \u0275cmp=w({type:i,selectors:[["app-cart"]],standalone:!0,features:[F],decls:4,vars:1,consts:[["msg",""],["btnRemove",""],["btnDec",""],["btnInc",""],[1,"w-75","mx-auto","rounded","shadow","bg-main-ligth","p-3","my-4"],[1,"alert","alert-danger","w-50","mx-auto","text-center"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"text-main"],[1,"row","py-2","border-bottom","align-items-center"],[1,"main-btn","mt-3","d-block","ms-auto","p-2",3,"routerLink"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10","d-flex","align-items-center","justify-content-between"],[1,"h6"],[1,"text-main","small","mb-0"],[1,"btn","m-0","p-0","text-danger",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"btn","btn-sm","border-info",3,"click"],[1,"p-2"]],template:function(e,n){e&1&&k(0,H,13,7,"section",4)(1,U,2,0,"h2",5)(2,Y,2,0,"ng-template",null,0,B),e&2&&D(n.cartDetails?0:1)},dependencies:[L,P]})};export{j as CartComponent};
