import{a as q,c as J,g as K,l as Q}from"./chunk-64AJHUAZ.js";import{a as z}from"./chunk-BS6BRVDQ.js";import{l as Y}from"./chunk-VUNKZBAI.js";import{a as O}from"./chunk-O4C5BUMC.js";import{a as N}from"./chunk-THTALMT4.js";import{g as j}from"./chunk-LHRA3WSF.js";import{a as $,b as G,c as U}from"./chunk-BNWOD5UO.js";import{a as H}from"./chunk-EIYVAXR4.js";import{$a as P,Ab as f,Db as k,Eb as E,Fb as A,Hb as D,Ib as M,Ja as T,Kb as R,Nb as h,Oa as s,Pa as p,Pb as v,Ta as L,_ as w,ba as y,bb as C,fb as S,gb as F,hb as I,ia as l,ib as V,ja as m,jb as o,kb as c,lb as b,ob as _,qb as g,qc as B,rb as d,yb as W,zb as u}from"./chunk-SVRTX5CE.js";var x=class r{transform(t,e){return t.filter(i=>i.title.toLowerCase().includes(e.toLocaleLowerCase()))}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=y({name:"search",type:r,pure:!0,standalone:!0})};var te=(r,t,e)=>({id:"productPaginate",itemsPerPage:r,currentPage:t,totalItems:e}),ie=r=>["/productDetails",r];function re(r,t){if(r&1){let e=_();o(0,"i",20),g("click",function(){l(e);let n=d().$implicit,a=d(2);return m(a.addFav(n._id))}),c()}}function ne(r,t){if(r&1){let e=_();o(0,"i",21),g("click",function(){l(e);let n=d().$implicit,a=d(2);return m(a.removeFav(n._id))}),c()}}function oe(r,t){if(r&1){let e=_();o(0,"div",5)(1,"div",8)(2,"header",9),b(3,"img",10),o(4,"h3",11),u(5),c(),o(6,"h4",12),u(7),h(8,"cuttext"),c(),o(9,"div",13)(10,"span"),u(11),h(12,"currency"),c(),o(13,"span"),b(14,"i",14),o(15,"span",15),u(16),c()()()(),o(17,"footer",16)(18,"button",17,0),g("click",function(){let n=l(e).$implicit,a=W(19),Z=d(2);return m(Z.addProduct(n._id,a))}),u(20," + Add To Cart "),c(),P(21,re,1,0,"i",18)(22,ne,1,0,"i",19),c()()()}if(r&2){let e=t.$implicit,i=d(2);s(2),C("routerLink",M(15,ie,e._id)),s(),C("src",e.imageCover,T)("alt",e.title)("title",e.title),s(2),f(e.category.name),s(2),f(v(8,9,e.title,2)),s(4),f(v(12,12,e.price,"EGY")),s(5),f(e.ratingsAverage),s(5),S(i.wishListData.includes(e._id)?22:21)}}function ae(r,t){if(r&1){let e=_();o(0,"section",1)(1,"h2",2),u(2,"All Products"),c(),o(3,"input",3),A("ngModelChange",function(n){l(e);let a=d();return E(a.term,n)||(a.term=n),m(n)}),c(),o(4,"div",4),I(5,oe,23,17,"div",5,F),h(7,"search"),h(8,"paginate"),c(),o(9,"div",6)(10,"pagination-controls",7),g("pageChange",function(n){l(e);let a=d();return m(a.pageChanged(n))})("pageBoundsCorrection",function(n){l(e);let a=d();return m(a.pageChanged(n))}),c()()()}if(r&2){let e=d();s(3),k("ngModel",e.term),s(2),V(v(8,8,v(7,5,e.products,e.term),R(11,te,e.pageSize,e.curentPage,e.total))),s(5),C("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}var X=class r{constructor(t,e,i,n,a){this._ProductService=t;this._CartService=e;this._ToastrService=i;this._Renderer2=n;this._WishlistService=a}products=[];wishListData=[];pageSize=0;curentPage=1;total=0;term="";ngOnInit(){this.getProducts(),this._WishlistService.getWishlist().subscribe({next:t=>{let e=t.data.map(i=>i._id);this.wishListData=e},error:t=>{console.log(t)}})}getProducts(){this._ProductService.getProucts().subscribe({next:t=>{this.products=t.data,this.pageSize=t.metadata.limit,this.curentPage=t.metadata.currentPage,this.total=t.results},error:t=>{console.log(t)}})}addProduct(t,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.addToCart(t).subscribe({next:i=>{this._ToastrService.success(i.message),this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartNumber.next(i.numOfCartItems)},error:i=>{console.log(i),this._Renderer2.removeAttribute(e,"disabled")}})}pageChanged(t){this._ProductService.getProucts(t).subscribe({next:e=>{this.products=e.data,this.pageSize=e.metadata.limit,this.curentPage=e.metadata.currentPage,this.total=e.results},error:e=>{console.log(e)}})}addFav(t){this._WishlistService.addToWish(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.wishListData=e.data;let i=e.data.length;this._WishlistService.countOfWish.next(i)},error:e=>{console.log(e)}})}removeFav(t){this._WishlistService.removeFromWish(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.wishListData=e.data;let i=e.data.length;this._WishlistService.countOfWish.next(i)},error:e=>{console.log(e)}})}static \u0275fac=function(e){return new(e||r)(p(H),p(N),p(Y),p(L),p(O))};static \u0275cmp=w({type:r,selectors:[["app-products"]],standalone:!0,features:[D],decls:1,vars:1,consts:[["btnAdd",""],[1,"py-4"],[1,"text-center","my-2"],["type","text","placeholder","Search....",1,"form-control","w-50","mx-auto","my-3","shadow",3,"ngModelChange","ngModel"],[1,"row","g-4","justify-content-center"],[1,"col-sm-6","col-md-3"],[1,"d-flex","justify-content-center","my-3"],["id","productPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"pageChange","pageBoundsCorrection","maxSize","directionLinks","autoHide","responsive"],[1,"product","h-100"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"h6","text-main"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"main-btn","w-100",3,"click"],[1,"fa-regular","fa-heart","ms-3","heart"],[1,"fa-solid","fa-heart","ms-3","heart","text-danger"],[1,"fa-regular","fa-heart","ms-3","heart",3,"click"],[1,"fa-solid","fa-heart","ms-3","heart","text-danger",3,"click"]],template:function(e,i){e&1&&P(0,ae,11,15,"section",1),e&2&&S(i.products.length>0?0:-1)},dependencies:[B,z,j,U,$,G,x,Q,q,J,K]})};export{X as ProductsComponent};
