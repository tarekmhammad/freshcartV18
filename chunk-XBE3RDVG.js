import{a as j,b as M,c as L}from"./chunk-UOQ7LSIJ.js";import{l as B}from"./chunk-VUNKZBAI.js";import{a as V}from"./chunk-O4C5BUMC.js";import{a as F}from"./chunk-THTALMT4.js";import{d as k}from"./chunk-LHRA3WSF.js";import{a as N}from"./chunk-EIYVAXR4.js";import{$a as _,Ab as m,Hb as A,Ja as D,Nb as E,Oa as a,Pa as c,Pb as W,Ta as b,_ as S,bb as x,fb as C,gb as w,hb as P,ia as p,ib as T,ja as u,jb as o,kb as n,lb as g,mb as I,nb as y,ob as v,qb as f,qc as R,rb as d,yb as O,zb as l}from"./chunk-SVRTX5CE.js";function G(r,t){if(r&1&&g(0,"img",18),r&2){let e=d().$implicit;x("src",e,D)}}function H(r,t){r&1&&(I(0),_(1,G,1,1,"ng-template",17),y())}function U(r,t){if(r&1){let e=v();o(0,"i",19),f("click",function(){p(e);let s=d(2);return u(s.addFav(s.productDetails._id))}),n()}}function $(r,t){if(r&1){let e=v();o(0,"i",20),f("click",function(){p(e);let s=d(2);return u(s.removeFav(s.productDetails._id))}),n()}}function q(r,t){if(r&1){let e=v();o(0,"section",1)(1,"div",2)(2,"div",3)(3,"owl-carousel-o",4),P(4,H,2,0,"ng-container",null,w),n()(),o(6,"div",5)(7,"div",6)(8,"h2",7),l(9),n(),o(10,"p",8),l(11),n(),o(12,"span"),l(13),n(),o(14,"div",9)(15,"span",10),l(16),E(17,"currency"),n(),o(18,"p",11)(19,"span"),g(20,"i",12),n(),o(21,"span"),l(22),n()()(),o(23,"footer",13)(24,"button",14,0),f("click",function(){p(e);let s=O(25),h=d();return u(h.addProduct(h.productDetails._id,s))}),l(26," + Add To Cart "),n(),_(27,U,1,0,"i",15)(28,$,1,0,"i",16),n()()()()()}if(r&2){let e=d();a(3),x("options",e.productDetailsOptions),a(),T(e.productDetails.images),a(5),m(e.productDetails.title),a(2),m(e.productDetails.description),a(2),m(e.productDetails.category.name),a(3),m(W(17,7,e.productDetails.price,"EGP")),a(6),m(e.productDetails.ratingsAverage),a(5),C(e.wishListData.includes(e.productDetails._id)?28:27)}}var z=class r{constructor(t,e,i,s,h,J){this._ActivatedRoute=t;this._ProductService=e;this._CartService=i;this._ToastrService=s;this._Renderer2=h;this._WishlistService=J}wishListData=[];productId;productDetails=null;productDetailsOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!1,dots:!1,autoplay:!0,autoplayTimeout:2e3,autoplaySpeed:1e3,navSpeed:700,navText:["",""],items:1,nav:!1};ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:t=>{this.productId=t.get("id")},error:t=>{console.log(t)}}),this._ProductService.getProductDetails(this.productId).subscribe({next:t=>{this.productDetails=t.data},error:t=>{console.log(t)}}),this._WishlistService.getWishlist().subscribe({next:t=>{let e=t.data.map(i=>i._id);this.wishListData=e},error:t=>{console.log(t)}})}addProduct(t,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.addToCart(t).subscribe({next:i=>{this._ToastrService.success(i.message),this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartNumber.next(i.numOfCartItems)},error:i=>{console.log(i),this._Renderer2.removeAttribute(e,"disabled")}})}addFav(t){this._WishlistService.addToWish(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.wishListData=e.data;let i=e.data.length;this._WishlistService.countOfWish.next(i)}})}removeFav(t){this._WishlistService.removeFromWish(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.wishListData=e.data;let i=e.data.length;this._WishlistService.countOfWish.next(i)},error:e=>{console.log(e)}})}static \u0275fac=function(e){return new(e||r)(c(k),c(N),c(F),c(B),c(b),c(V))};static \u0275cmp=S({type:r,selectors:[["app-product-details"]],standalone:!0,features:[A],decls:1,vars:1,consts:[["btnAdd",""],[1,"my-4","w-75","mx-auto","rounded","p-3"],[1,"row","align-items-center","g-4"],[1,"col-md-3"],[3,"options"],[1,"col-md-9"],[1,"productInfo"],[1,"h5"],[1,"text-muted","small"],[1,"d-flex","align-items-center","justify-content-between","my-3"],[1,"small"],[1,"mb-0"],[1,"fas","fa-star","rating-color"],[1,"d-flex","justify-content-between","align-items-center"],[1,"main-btn","w-100",3,"click"],[1,"fa-regular","fa-heart","ms-3","heart-details"],[1,"fa-solid","fa-heart","ms-3","heart-details","text-danger"],["carouselSlide",""],[3,"src"],[1,"fa-regular","fa-heart","ms-3","heart-details",3,"click"],[1,"fa-solid","fa-heart","ms-3","heart-details","text-danger",3,"click"]],template:function(e,i){e&1&&_(0,q,29,10,"section",1),e&2&&C(i.productDetails?0:-1)},dependencies:[L,M,j,R],styles:["section[_ngcontent-%COMP%]{box-shadow:2px 2px 15px #00bce4}.heart-details[_ngcontent-%COMP%]{font-size:30px;cursor:pointer}"]})};export{z as ProductDetailsComponent};
